<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Archives: 2015/1 | Nopper&#39;s blog</title>
  <meta name="author" content="Francesco Piccinno">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="Nopper&#39;s blog"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.ico" rel="shortcut icon">
  <link rel="alternate" href="atom.xml" title="Nopper&#39;s blog" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
  <script>
  // $(document).ready(function() {
  //   $('#sidebar').delay(400).animate({ width: '285px' }, 500, function() {
  //     $('.personal-info').css({display: 'table'}).hide().fadeIn(500);
  //   });
  // });
  </script>
  
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-9430447-4', 'nopper.me');
  ga('require', 'displayfeatures');
  ga('send', 'pageview');
</script>


</head>


<body>
  <header id="header" class="inner"></header>
  <div id="content" class="inner">
    <div id="main-col" class="alignright"><div id="wrapper">
<h2 class="archive-title">2015/1</h2>


  
    <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
    <header>
      
        <div class="icon depth"></div>
        <time datetime="2015-01-16T18:38:02.000Z"><a href="/2015/01/16/facebook-hacker-cup-2015-solutions-python/">Jan 16 2015</a></time>
      
      
  
    <h1 class="title depth"><a href="/2015/01/16/facebook-hacker-cup-2015-solutions-python/">Facebook Hacker Cup 2015 Solutions Python</a></h1>
  

    </header>
    <div class="entry">
      
        <p>In case you are wondering how to solve the problem of Facebook Hacker Cup 2015 Edition, here follows my simple solutions using in Python. I just copy pasted the code from my editor ;) No explanation the code is pretty self-explanatory and very easy to follow. I hope you find them useful.</p>
<h1 id="cooking-the-books">Cooking the Books</h1>
<p>Look at the <a href="https://googledrive.com/host/0B1rHL5Z9sBnVWXc0TWpBSkFBUjA" target="_blank">Problem statement</a> (<a href="https://www.facebook.com/hackercup/problems.php?pid=582062045257424&amp;round=742632349177460" target="_blank">official link</a>)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
</pre></td><td class="code"><pre><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">(contents)</span>:</span>
    output = <span class="string">""</span>
    it = iter(contents.splitlines())
    num_testcases = int(it.next())

    <span class="keyword">for</span> testcase <span class="keyword">in</span> xrange(<span class="number">1</span>, num_testcases + <span class="number">1</span>):
        n = list(it.next())
        l = u = int(<span class="string">''</span>.join(n))

        <span class="keyword">for</span> i <span class="keyword">in</span> xrange(len(n)):
            <span class="keyword">for</span> j <span class="keyword">in</span> xrange(i + <span class="number">1</span>, len(n)):
                n[i], n[j] = n[j], n[i]

                <span class="keyword">if</span> n[<span class="number">0</span>] == <span class="string">'0'</span>:
                    <span class="keyword">continue</span>

                l = min(int(<span class="string">''</span>.join(n)), l)
                u = max(int(<span class="string">''</span>.join(n)), u)

                n[i], n[j] = n[j], n[i]

        output += <span class="string">"Case #%d: %d %d\n"</span> % (testcase, l, u)

    <span class="keyword">return</span> output


input_file = <span class="string">"""5
31524
897
123
10
5
"""</span>

<span class="keyword">assert</span> main(input_file) == <span class="string">"""Case #1: 13524 51324
Case #2: 798 987
Case #3: 123 321
Case #4: 10 10
Case #5: 5 5
"""</span>
</pre></td></tr></table></figure>


<h1 id="new-year-s-resolution">New Year&#39;s Resolution</h1>
<p>Look at the <a href="https://googledrive.com/host/0B1rHL5Z9sBnVMVdHeUhZSEZRbHM" target="_blank">Problem statement</a> (<a href="https://www.facebook.com/hackercup/problems.php?pid=1036037553088752&amp;round=742632349177460" target="_blank">official link</a>)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
</pre></td><td class="code"><pre><span class="function"><span class="keyword">def</span> <span class="title">solve</span><span class="params">(gp, gc, gf, xs)</span>:</span>
    <span class="keyword">if</span> gp == <span class="number">0</span> <span class="keyword">and</span> gc == <span class="number">0</span> <span class="keyword">and</span> gf == <span class="number">0</span>:
        <span class="keyword">return</span> <span class="keyword">True</span>

    <span class="keyword">if</span> gp &lt; <span class="number">0</span> <span class="keyword">or</span> gc &lt; <span class="number">0</span> <span class="keyword">or</span> gf &lt; <span class="number">0</span>:
        <span class="keyword">return</span> <span class="keyword">False</span>

    <span class="keyword">if</span> <span class="keyword">not</span> xs:
        <span class="keyword">return</span> <span class="keyword">False</span>

    p, c, f = xs[<span class="number">0</span>]
    xs = xs[<span class="number">1</span>:]

    <span class="keyword">return</span> solve(gp - p, gc - c, gf - f, xs) <span class="keyword">or</span> solve(gp, gc, gf, xs)


<span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">(contents)</span>:</span>
    output = <span class="string">""</span>
    it = iter(contents.splitlines())
    num_testcases = int(it.next())

    <span class="keyword">for</span> testcase <span class="keyword">in</span> xrange(<span class="number">1</span>, num_testcases + <span class="number">1</span>):
        gp, gc, gf = map(int, it.next().split())
        n = int(it.next())

        xs = []

        <span class="keyword">for</span> i <span class="keyword">in</span> xrange(n):
            tup = map(int, it.next().split())
            xs.append(tup)

        xs.sort(key=<span class="keyword">lambda</span> x: x[<span class="number">0</span>])
        solvable = solve(gp, gc, gf, xs)

        output += <span class="string">"Case #%d: %s\n"</span> % (testcase, solvable <span class="keyword">and</span> <span class="string">"yes"</span> <span class="keyword">or</span> <span class="string">"no"</span>)

    <span class="keyword">return</span> output


input_file = <span class="string">"""5
100 100 100
1
100 100 100
100 100 100
3
10 10 40
10 30 10
10 60 50
100 100 100
5
40 70 30
30 10 40
20 20 50
10 50 90
40 10 20
292 264 512
20
909 302 261
705 597 823
291 51 126
28 697 57
593 31 826
311 256 57
292 14 47
29 730 716
12 529 146
768 16 439
37 472 15
350 192 34
163 468 238
69 173 10
203 72 690
424 875 213
223 593 292
151 46 10
88 90 16
773 653 711
991 827 352
20
29 560 929
139 681 102
144 853 10
84 729 80
218 20 67
140 80 901
428 20 500
520 970 128
422 419 30
413 101 192
467 448 501
32 939 684
34 20 38
251 317 132
588 437 10
648 21 79
391 25 14
499 22 24
854 77 361
405 25 20
"""</span>

<span class="keyword">assert</span> main(input_file) == <span class="string">"""Case #1: yes
Case #2: no
Case #3: yes
Case #4: no
Case #5: yes
"""</span>
</pre></td></tr></table></figure>


<h1 id="laser-maze">Laser Maze</h1>
<p>Look at the <a href="https://googledrive.com/host/0B1rHL5Z9sBnVVWhxMGhEMFhodG8" target="_blank">Problem statement</a> (<a href="https://www.facebook.com/hackercup/problems.php?pid=1523599254559737&amp;round=742632349177460" target="_blank">official link</a>)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
</pre></td><td class="code"><pre><span class="keyword">import</span> sys

MOVES = [(<span class="number">1</span>, <span class="number">0</span>), (<span class="number">0</span>, <span class="number">1</span>), (-<span class="number">1</span>, <span class="number">0</span>), (<span class="number">0</span>, -<span class="number">1</span>)]


<span class="function"><span class="keyword">def</span> <span class="title">turn_lasers</span><span class="params">(lasers)</span>:</span>
    trans = {
        <span class="string">'&lt;'</span>: <span class="string">'^'</span>,
        <span class="string">'^'</span>: <span class="string">'&gt;'</span>,
        <span class="string">'&gt;'</span>: <span class="string">'v'</span>,
        <span class="string">'v'</span>: <span class="string">'&lt;'</span>
    }
    <span class="keyword">return</span> [(i, j, trans[t]) <span class="keyword">for</span> i, j, t <span class="keyword">in</span> lasers]


<span class="function"><span class="keyword">def</span> <span class="title">was_hit</span><span class="params">(x, y, lasers)</span>:</span>
    <span class="keyword">for</span> lx, ly, t <span class="keyword">in</span> lasers:
        <span class="keyword">if</span> lx == x:
            <span class="keyword">if</span> t == <span class="string">'&lt;'</span> <span class="keyword">and</span> y &lt;= ly:
                <span class="keyword">return</span> <span class="keyword">True</span>
            <span class="keyword">if</span> t == <span class="string">'&gt;'</span> <span class="keyword">and</span> y &gt;= ly:
                <span class="keyword">return</span> <span class="keyword">True</span>

        <span class="keyword">if</span> ly == y:
            <span class="keyword">if</span> t == <span class="string">'^'</span> <span class="keyword">and</span> x &lt;= lx:
                <span class="keyword">return</span> <span class="keyword">True</span>
            <span class="keyword">if</span> t == <span class="string">'v'</span> <span class="keyword">and</span> x &gt;= lx:
                <span class="keyword">return</span> <span class="keyword">True</span>

    <span class="keyword">return</span> <span class="keyword">False</span>


<span class="function"><span class="keyword">def</span> <span class="title">solve_maze</span><span class="params">(ts, maze, lasers, visited, x, y, end)</span>:</span>
    lasers = turn_lasers(lasers)
    dead = was_hit(x, y, lasers)

    <span class="keyword">if</span> x &lt; <span class="number">0</span> <span class="keyword">or</span> y &lt; <span class="number">0</span> <span class="keyword">or</span> x &gt;= len(maze) <span class="keyword">or</span> y &gt;= len(maze[<span class="number">0</span>]) <span class="keyword">or</span> \
       dead <span class="keyword">or</span> (x, y, ts % <span class="number">4</span>) <span class="keyword">in</span> visited:
        <span class="keyword">return</span> sys.maxint

    <span class="keyword">if</span> (x, y) == end:
        <span class="keyword">return</span> <span class="number">0</span>

    <span class="comment"># We also consider laser positions in the state space</span>
    visited.add((x, y, ts % <span class="number">4</span>))

    <span class="keyword">return</span> <span class="number">1</span> + min(
        (solve_maze(ts + <span class="number">1</span>, maze, lasers, visited, x + i, y + j, end)
            <span class="keyword">for</span> i, j <span class="keyword">in</span> MOVES)
    )


<span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">(contents)</span>:</span>
    output = <span class="string">""</span>
    it = iter(contents.splitlines())
    num_testcases = int(it.next())

    <span class="keyword">for</span> testcase <span class="keyword">in</span> xrange(<span class="number">1</span>, num_testcases + <span class="number">1</span>):
        h, w = map(int, it.next().split())

        maze = []
        lasers = []
        beg = <span class="keyword">None</span>
        end = <span class="keyword">None</span>

        <span class="keyword">for</span> i <span class="keyword">in</span> xrange(h):
            line = []
            <span class="keyword">for</span> j, ch <span class="keyword">in</span> enumerate(it.next()):
                line.append(ch)

                <span class="keyword">if</span> ch == <span class="string">'S'</span>:
                    beg = (i, j)
                <span class="keyword">if</span> ch == <span class="string">'G'</span>:
                    end = (i, j)
                <span class="keyword">if</span> ch <span class="keyword">in</span> <span class="string">'&lt;&gt;^v'</span>:
                    lasers.append((i, j, ch))

            maze.append(line)

        steps = min(
            solve_maze(<span class="number">0</span>, maze, lasers, set(), beg[<span class="number">0</span>] + <span class="number">1</span>, beg[<span class="number">1</span>] + <span class="number">0</span>, end),
            solve_maze(<span class="number">0</span>, maze, lasers, set(), beg[<span class="number">0</span>] + <span class="number">0</span>, beg[<span class="number">1</span>] + <span class="number">1</span>, end),
            solve_maze(<span class="number">0</span>, maze, lasers, set(), beg[<span class="number">0</span>] - <span class="number">1</span>, beg[<span class="number">1</span>] + <span class="number">0</span>, end),
            solve_maze(<span class="number">0</span>, maze, lasers, set(), beg[<span class="number">0</span>] + <span class="number">0</span>, beg[<span class="number">1</span>] - <span class="number">1</span>, end),
        )

        output += <span class="string">"Case #%d: %s\n"</span> % (
            testcase,
            (steps == sys.maxint) <span class="keyword">and</span> <span class="string">"impossible"</span> <span class="keyword">or</span> str(steps + <span class="number">1</span>)
        )

    <span class="keyword">return</span> output

input_file = <span class="string">"""5
2 5
##^##
S...G
2 5
##v##
S...G
1 5
S..G&lt;
1 6
S...G&lt;
5 5
S....
.....
.&gt;v..
.^&lt;..
....G
"""</span>

output_file = <span class="string">"""Case #1: 6
Case #2: 4
Case #3: 3
Case #4: impossible
Case #5: 8
"""</span>

output = main(input_file)
<span class="keyword">assert</span> output == output_file
</pre></td></tr></table></figure>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


  

  <nav id="pagination">
  
  
  <div class="clearfix"></div>
</nav>
</div></div>
    <aside id="sidebar" class="alignleft"><div class="personal-info">
  <figure>
    
      <a href="/">
        <img class="personal-photo" src="https://2.gravatar.com/avatar/2c654726a87dda9a37b89b6db84700b9?r=x&s=440" alt="Francesco Piccinno">
      </a>
    
    <figcaption>
      <h3 class=>Francesco Piccinno</h3>
      <p>I disagree with unanimity.</p>
    </figcaption>
  </figure>
  <section class="social">
    
    
      <a target="_blank" title="Follow me on GitHub" class="icon github depth shadow" href="http://github.com/nopper"></a>
    
    
      <a target="_blank" title="LinkedIn profile" class="icon linkedin depth shadow" href="http://linkedin.com/in/francescopiccinno"></a>
    
    
      <a target="_blank" title="Follow me on Twitter" class="icon twitter depth shadow" href="http://twitter.com/nopper"></a>
    
    
      <a target="_blank" title="Subscribe to my blog" class="icon rss depth shadow" href="/atom.xml"></a>
    
  </section>
</div>
<div class="extras">
  
    
<div class="widget tag">
  <h3 class="title">Tags</h3>
  <ul class="entry">
  
    <li><a href="/tags/archpwn/">archpwn</a><small>1</small></li>
  
    <li><a href="/tags/bsp/">bsp</a><small>1</small></li>
  
    <li><a href="/tags/compression/">compression</a><small>1</small></li>
  
    <li><a href="/tags/cryptography/">cryptography</a><small>1</small></li>
  
    <li><a href="/tags/giraph/">giraph</a><small>1</small></li>
  
    <li><a href="/tags/graph/">graph</a><small>1</small></li>
  
    <li><a href="/tags/hadoop/">hadoop</a><small>1</small></li>
  
    <li><a href="/tags/htm/">htm</a><small>1</small></li>
  
    <li><a href="/tags/lotw/">lotw</a><small>3</small></li>
  
    <li><a href="/tags/machine-learning/">machine-learning</a><small>1</small></li>
  
    <li><a href="/tags/python, facebook, programming/">python, facebook, programming</a><small>1</small></li>
  
    <li><a href="/tags/stm/">stm</a><small>1</small></li>
  
    <li><a href="/tags/telegram/">telegram</a><small>1</small></li>
  
    <li><a href="/tags/transactional memory/">transactional memory</a><small>1</small></li>
  
    <li><a href="/tags/webgraph/">webgraph</a><small>1</small></li>
  
  </ul>
</div>

  
    
<div class="widget tag">
  <h3 class="title">Links</h3>
  <ul class="entry">
    
      <li><a href="/archpwn">ArchPwn</a></li>
    
      <li><a href="/contacts">Contacts</a></li>
    
  </ul>
</div>

  
</div></aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignright depth">
  Theme based on <a href="http://github.com/thiagopnts/hexo-persona-dark" style="text-decoration: underline;">Persona Dark Theme</a> 
  &copy; - 2015 Francesco Piccinno
  
</div>
<div class="clearfix"></div></footer>
  <script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>


<script type="text/javascript">
var disqus_shortname = 'noppersblog';

(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
</script>



<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox({
    helpers : {
        title: {
            type: 'inside'
        }
    }
});
})(jQuery);
</script>

</body>
</html>